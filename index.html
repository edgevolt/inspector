<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Interactive query language explainer that breaks down KQL, SQL, and other queries with visual indicators and detailed explanations.">
  <meta name="keywords" content="KQL, SQL, Query Language, Kusto, Explainer, Tutorial, Learn">
  <title>Inspector - Understand Your Queries</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-text">
          <h1>Inspector</h1>
          <p>Analyze and understand query statements and log entries</p>
        </div>
      </div>
    </header>

    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <button id="query-mode-btn" class="mode-btn active" aria-label="Switch to Statement Mode">
        ğŸ” Statement Mode
      </button>
      <button id="log-mode-btn" class="mode-btn" aria-label="Switch to Log Mode">
        ğŸ“‹ Log Mode
      </button>
    </div>

    <!-- Statement Mode Container (query language parsing) -->
    <div id="query-mode-container" class="mode-container active">

      <!-- Language Selector -->
      <div class="statement-mode-header">
        <div class="statement-info">
          <h2><span id="language-name">KQL</span></h2>
          <p id="language-description">Understand your Kusto Query Language statements with visual breakdowns and
            detailed explanations</p>
        </div>
        <div class="language-selector-container">
          <label for="language-selector" class="sr-only">Select query language</label>
          <select id="language-selector" class="language-selector" aria-label="Select query language">
            <option value="kql">ğŸ“Š KQL</option>
            <!-- Future languages will be added here dynamically -->
          </select>
        </div>
      </div>

      <!-- Input Section -->
      <section class="input-section">
        <label for="query-input" class="input-label" id="query-input-label">Enter your query:</label>
        <textarea id="query-input" class="query-input"
          placeholder="SecurityEvent | where TimeGenerated > ago(1h) | take 10" aria-label="Query input"></textarea>
      </section>

      <!-- Explanation Section -->
      <section class="explanation-section">
        <h2 class="input-label">Explanation:</h2>
        <div id="explanation-container" class="explanation-container">
          <div class="explanation-empty">
            Enter a KQL query above to see a detailed explanation
          </div>
        </div>

        <!-- Info Panel for selected token -->
        <div id="info-panel" class="info-panel" style="display: none;">
          <div class="info-panel-header">
            <h3 id="info-panel-title"></h3>
            <button id="info-panel-close" class="info-panel-close" aria-label="Close info panel">Ã—</button>
          </div>
          <div id="info-panel-content"></div>
        </div>
      </section>

      <!-- Examples Section -->
      <section class="examples-section">
        <h2 class="examples-title">Example Queries</h2>
        <div class="examples-grid" id="examples-grid">
          <!-- Examples will be populated by JavaScript -->
        </div>
      </section>
    </div> <!-- End Query Mode Container -->

    <!-- Log Mode Container (new functionality) -->
    <div id="log-mode-container" class="mode-container">
      <section class="log-header">
        <h2>ğŸ“‹ Log Parser</h2>
        <p>Paste firewall logs, server logs, or security events to analyze</p>
      </section>

      <section class="log-controls">
        <label for="log-format-selector" class="input-label">Log Format:</label>
        <div class="log-controls-row">
          <select id="log-format-selector" class="log-format-selector">
            <option value="">Select log format...</option>
          </select>
          <button id="auto-detect-btn" class="auto-detect-btn">ğŸ” Auto-Detect</button>
        </div>
      </section>

      <section class="log-input-section">
        <label for="log-input" class="input-label">Paste Log Entries:</label>
        <textarea id="log-input" class="log-input"
          placeholder="Paste your log entries here (one or multiple lines)..."></textarea>
      </section>

      <section class="log-results-section">
        <h3 class="input-label">Parsed Fields:</h3>
        <div id="parsed-fields-container" class="parsed-fields-container"></div>
      </section>

      <section class="log-statistics-section" style="display: none;">
        <h3 class="input-label">Statistics:</h3>
        <div id="log-statistics-container" class="log-statistics-container"></div>
      </section>

      <section class="log-examples-section">
        <h3 class="examples-title">Example Logs</h3>
        <div id="log-examples-grid" class="examples-grid"></div>
      </section>
    </div> <!-- End Log Mode Container -->

    <!-- Footer -->
    <footer class="footer">
      <p>
        <strong>explain.getstat.dev</strong> - Learn query languages interactively
      </p>
    </footer>
  </div>

  <script type="module" src="main.js"></script>
</body>

</html>